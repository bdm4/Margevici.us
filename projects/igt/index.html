<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if gte IE 9]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<title>Margevici.us</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Iowa Gambing Tast V0.1"/>
	<meta name="keywords" content="IGT, Iowa Gambling Test" /> 
	<meta name="author" content="Ben Margevicius" />
	
	<!-- Styles that are included on every page --> 
	<!-- include bootstrap for repsonsive structuring -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

	<!-- custom fonts 
	https://developers.google.com/fonts/docs/getting_started#Subsets
	-->
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Alegreya&effect=shadow-multiple|3d-float|fire-animation">


	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-58996218-1', 'auto');
		ga('send', 'pageview');
	</script>

	<style>
		body { background: #006600; }	
		a:active, a:focus { outline: none; /* remove the dotted border */ }
		figcaption { font-size: 16px; text-align: center;}	
		.row { margin: 0 15px; }
		#gamelog { width: 100%; }
		
		@media (max-width: 767px) {		
		}	
	</style>
	
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>    
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
 </head>
 
<body>
 
<main class="container">
	<section class="row">
		<div class="col-xs-3">
			<figure>
				<a id="card-one" href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 1 <span id="deck-one-clicks"></span>
				</figcaption>
			</figure>
		</div>
		<div class="col-xs-3">
			<figure>
				<a id="card-two" href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 2 <span id="deck-two-clicks"></span>
				</figcaption>
			</figure>
		</div>
		<div class="col-xs-3">
			<figure>
				<a id="card-three"  href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 3 <span id="deck-three-clicks"></span>
				</figcaption>
			</figure>
		</div>
		<div class="col-xs-3">
			<figure>
				<a id="card-four" href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 4 <span id="deck-four-clicks"></span>
				</figcaption>
			</figure>
		</div>
	</section>
	
	<section class="row">
		<p>Cash Pile</p>
		<div class="progress">
			<div id="cashpilebar" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="2000" aria-valuemin="0" aria-valuemax="6000" style="width: 33%">
				<span id="cashpileamt">$2000</span>				
			</div>
		</div>
		
		<p>Borrowed</p>
		<div class="progress">		
			<div id="borrowedpilebar" class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="6000" style="width: 2em">
				<span id="borrowedpileamt">$0</span>				
			</div>
		</div>
	</section>
	
	<section class="row">
		<textarea id="gamelog"></textarea>
	</section>
	
	<div id="modal-splash" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Welcome to IGT V0.1!</h4>
				</div>
				<div class="modal-body">	
					<div>
						<p>Rules:</p>
						<ol>
							<li>The goal is to maximize profit on loan.</li>
							<li>You are free to choose a card from any deck at any time</li>
							
						</ol>
					</div>
					<form>
						<label for="emailResultsTo">Where should I send the results to?</label>
						<div class="input-group">							
							<input type="text" id="emailResultsTo" class="form-control" placeholder="someone@somewhere.com">
							<span class="input-group-btn">
								<button id="emailBtn" class="btn btn-default" type="button">Save</button>
							</span>
						</div>
					</form>						
				</div>
			</div>
		</div>
	</div>	
</main>
 
<!-- DEVELOPMENT DEBUGGING -->
<!-- Jquery 1.9 is the last to support IE8 and lower -->
<!--[if lt IE 9]>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script>console.warn("Please update to the lastest browser. Running in depreciated mode");</script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<!--<![endif]-->
<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

<script>

var totalcash = 2000, //cash in the cash pile
	deckoneclicks = 0, //clicks for deck one
	decktwoclicks = 0, //clicks for deck two
	deckthreeclicks = 0, //clicks for deck three
	deckfourclicks = 0, //clicks for deck four
	
	DECKONEWIN = 100, 
	DECKTWOWIN = 100,
	DECKTHREEWIN = 50, 
	DECKFOURWIN = 50,
	
	//Probablity of loss Should be between 0.00 and 1.00. Note the inequalities in the switch. if px > 0.5 you may have to 1.00-px
	DECKONELOSSPX = 0.50, 
	DECKTWOLOSSPX = 0.10, 
	DECKTHREELOSSPX = 0.50,
	DECKFOURLOSSPX = 0.10,
	
	//Penalty Ranges.
	DECKONELOSSMIN = 200, DECKONELOSSMAX = 500, //DECK A =  .5 * (500-200) = 150 Average loss
	DECKTWOLOSSMIN = 1250, DECKTWOLOSSMAX = 1250, //DECK B = .1 * 1250 =  250 Average Loss
	DECKTHREELOSSMIN = 50, DECKTHREELOSSMAX = 150, //DECK C = .5 * (150-50) = 50 Average Loss
	DECKFOURLOSSMIN = 250, DECKFOURLOSSMAX = 250, //DECK D  = .1 * 250 = 25 Average Loss
	
	totalclicks = 0, //total clicks. if == to MAXGAMES stop playing.
	CASHMAX = 15000, //Maximum amount of cash that can be won.
	borrowedcash = 0, //how much cash did you borrow?
	MAXGAMES = 100; //maxium amount of plays

//rewards preprogramed pentalties are higher for deck A & B.
$(function(){
	$('#modal-splash').modal('show'); //show the modal on first load
	$("#gamelog").val("");
	$("#emailBtn").click(function(){
		var emailto = $("#emailResultsTo").val();
		console.log("I will email results to: ", emailto);
		$('#modal-splash').modal('hide'); //close the modal
	});
	
	$(".card").click(function (){
		if(totalclicks < MAXGAMES)
		{
			var clicked = $(this).attr("id");
			
			var gamelogmsg = "You win ";
			var newline = "\r\n";
			switch(clicked) 
			{
				case "card-one":
					totalcash += DECKONEWIN; //win 100 profit
					
					gamelogmsg += DECKONEWIN.toString();
					if( Math.random() <= DECKONELOSSPX)
					{						
						gamelogmsg += newline + "You lost $200";
						borrowedcash += 200;
						totalcash -= 200;
					}
					deckoneclicks += 1;
					$("#deck-one-clicks").html(deckoneclicks);
					break;
				case "card-two":
					totalcash += DECKTWOWIN; //win 100 profit
					gamelogmsg += DECKTWOWIN.toString();
					if( Math.random() <= DECKTWOLOSSPX)
					{
						gamelogmsg += newline + "You lost $1250";
						borrowedcash += 1250;
						totalcash -= 1250;
					}					
					decktwoclicks += 1;
					$("#deck-two-clicks").html(decktwoclicks);
					break;
				case "card-three":
					totalcash += DECKTHREEWIN; //win 50 profit
					gamelogmsg += DECKTHREEWIN.toString();
					if( Math.random() <= DECKTHREELOSSPX)
					{
						gamelogmsg += newline + "You lost $50";
						borrowedcash += 50;
						totalcash -= 50;
					}					
					deckthreeclicks += 1;
					$("#deck-three-clicks").html(deckthreeclicks);
					break;
				case "card-four":
					totalcash += DECKFOURWIN; //win 50 profit
					gamelogmsg += DECKFOURWIN.toString();
					if( Math.random() <= DECKFOURLOSSPX)
					{
						gamelogmsg += newline + "You lost $250";
						borrowedcash += 250;
						totalcash -= 250;
					}
					deckfourclicks += 1;
					$("#deck-four-clicks").html(deckfourclicks);
					break;
			}
			
			totalclicks = deckoneclicks + decktwoclicks + deckthreeclicks + deckfourclicks;
			if(totalcash < 0) totalcash = 0; //if total cash is negative make it 0.
			
			$("#gamelog").val(gamelogmsg);
			var cashpilebarvalue = 100 * totalcash / CASHMAX;
			var borrowedpilebarvalue = 100 * borrowedcash / CASHMAX;
			
			$("#cashpilebar").css("width", cashpilebarvalue.toString() + "%");
			$("#cashpileamt").html("$" + totalcash);
			$("#borrowedpilebar").css("width", borrowedpilebarvalue.toString() + "%");
			$("#borrowedpileamt").html("$" + borrowedcash);
			
			console.log("totalcash", totalcash);
			console.log("cashpilebarvalue", cashpilebarvalue);			
			console.log("Total clicks = ", totalclicks);
		}
		else
		{
			console.error("You have exceeded the max amount of plays", MAXGAMES)
		}
	});
});
</script>
 </body>
 </html>