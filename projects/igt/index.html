<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if gte IE 9]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<title>Margevici.us</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Iowa Gambing Tast V0.1"/>
	<meta name="keywords" content="IGT, Iowa Gambling Test" /> 
	<meta name="author" content="Ben Margevicius" />
	
	<!-- Styles that are included on every page --> 
	<!-- include bootstrap for repsonsive structuring -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

	<!-- custom fonts 
	https://developers.google.com/fonts/docs/getting_started#Subsets
	-->
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Alegreya&effect=shadow-multiple|3d-float|fire-animation">


	<script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-58996218-1', 'auto');
	    ga('send', 'pageview');
	</script>

	<style>
		body { background: #006600; }	
		
        figure a img {
             border: 2px solid black;
             border-radius: 15px;
        }

        figure a img:hover {
             border: 2px solid #00BB00;
        }       

		figcaption { font-size: 16px; text-align: center;}	
		.row { margin: 0 15px; }
		#gamelog { 
            width: 100%;
            background: #fff;             
            padding: 6px 5px;
            box-shadow: inset 0px 0px 6px 2px #8A8A8A;
            -webkit-box-shadow: inset 0px 0px 6px 2px #8A8A8A;
            -moz-box-shadow: inset 0px 0px 6px 2px #8A8A8A;
            -o-box-shadow: inset 0px 0px 6px 2px #8A8A8A;
            border-radius: 3px;              
		}

        #gamelog p {border-bottom: 1px solid #AEAEAE;}
		
		@media (max-width: 767px) {		
		}	
	</style>
	
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>    
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
 </head>
 
<body>
 
<main class="container">
	<section class="row">
		<div class="col-xs-3">
			<figure>
				<a id="card-one" href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 1 <span id="deck-one-clicks"></span>
				</figcaption>
			</figure>
		</div>
		<div class="col-xs-3">
			<figure>
				<a id="card-two" href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 2 <span id="deck-two-clicks"></span>
				</figcaption>
			</figure>
		</div>
		<div class="col-xs-3">
			<figure>
				<a id="card-three"  href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 3 <span id="deck-three-clicks"></span>
				</figcaption>
			</figure>
		</div>
		<div class="col-xs-3">
			<figure>
				<a id="card-four" href="#" class="card">
					<img class="img-responsive" alt="card back 1" src="blue-back.png" />
				</a>
				<figcaption>
					Deck 4 <span id="deck-four-clicks"></span>
				</figcaption>
			</figure>
		</div>
	</section>
	
	<section class="row">
		<p>Cash Pile</p>
		<div class="progress">
			<div id="cashpilebar" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="2000" aria-valuemin="0" aria-valuemax="6000" style="width: 33%">
				<span id="cashpileamt">$2000</span>				
			</div>
		</div>
	</section>
	
	<section class="row">
		<div id="gamelog">
            <p class="outputtext">You won: <span id="winamt"></span></p>
            <p class="outputtext">You lost: <span id="penaltyamt"></span></p>
            <p class="outputtext">Net +/-: <span id="netgains"></span></p>
		</div>
	</section>
	
	<div id="modal-splash" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Welcome to IGT V0.1!</h4>
				</div>
				<div class="modal-body">	
					<div>
						<p>Rules:</p>
						<ol>
							<li>In front of you on the screen, there are 4 decks of cards: A, B, C, and D.</li>
                            <li>When we begin the game, I want you to select one card at a time by clicking on a card from any deck you choose.</li>
                            <li>Each time you select a card, the computer will tell you that you won some money. I don’t know how much money you will win. You will find out as we go along. Every time you win, the bar gets bigger.</li>
                            <li>Every so often, when you click on a card, the computer will tell you that you won some money as usual, but then it will say that you lost some money as well. I don’t know when you will lose or how much. You will find out as we go along. Every time you lose, the bar gets smaller.</li>
                            <li>You are absolutely free to switch from one deck to the other at any time, and as often as you wish.</li>
                            <li>The goal of the game is to win as much money as possible and avoid losing as much money as possible.</li>
                            <li>You won’t know when the game will end. Simply keep on playing until the computer stops.</li>
                            <li>I am going to give you $2000 of credit to start the game. </li>
                            <li>The only hint I can give you, and the most important thing to note is this: Out of these four decks of cards, there are some that are worse than others, and to win you should try to stay away from bad decks. No matter how much you find yourself losing, you can still win the game if you avoid the worst decks.</li>
                            <li>Also note that the computer does not change the order of the cards once the game begins. It does not make you lose at random, or make you lose money based on the last card you picked.</li>							
						</ol>
					</div>
					<form>
						<label for="emailResultsTo">Where should I send the results to?</label>
						<div class="input-group">							
							<input type="text" id="emailResultsTo" class="form-control" placeholder="someone@somewhere.com">
							<span class="input-group-btn">
								<button id="emailBtn" class="btn btn-default" type="button">Save</button>
							</span>
						</div>
					</form>						
				</div>
			</div>
		</div>
	</div>	

    <div id="modal-gameend" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Thank you!</h4>
				</div>
				<div class="modal-body">	
					<div>
						Your test is complete. Results will be emailed to: <span id="geemail"></span>
					</div>									
				</div>
			</div>
		</div>
	</div>	

</main>
 
<!-- DEVELOPMENT DEBUGGING -->
<!-- Jquery 1.9 is the last to support IE8 and lower -->
<!--[if lt IE 9]>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script>console.warn("Please update to the lastest browser. Running in depreciated mode");</script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<!--<![endif]-->
<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

<script>

    var totalcash = 2000, //cash in the cash pile
        deckoneclicks = 0, //clicks for deck one
        decktwoclicks = 0, //clicks for deck two
        deckthreeclicks = 0, //clicks for deck three
        deckfourclicks = 0, //clicks for deck four
        totalclicks = 0, //total clicks. if == to MAXGAMES stop playing.  
        penalty = 0,   //penalty
        netgain = 0,   //netgain
        email_address = 'someone@somewhere.com',
        DECKA_WIN = 100,
        DECKB_WIN = 100,
        DECKC_WIN = 50,
        DECKD_WIN = 50,                
	    CASHMAX = 6000, //Maximum amount of cash that can be won.	
	    MAXGAMES = 100; //maxium amount of plays
	
    var DECKA_PENALTY = [0,0,-150,0,-300,0,-200,0,-250,-350,0,-350,0,-250,-200,0,-300,-150,0,0,0,-300,0,-350,0,-200,-250,-150,0,0,-350,-200,-250,0,0,0,-150,-300,0,0];
    var DECKB_PENALTY = [0,0,0,0,0,0,0,0,-1250,0,0,0,0,-1250,0,0,0,0,0,0,-1250,0,0,0,0,0,0,0,0,0,0,-1250,0,0,0,0,0,0,0,0];
    var DECKC_PENALTY = [0,0,-50,0,-50,0,-50,0,-50,-50, 0, -25,-75,0,0,0,-25,-75,0,-50,0,0,0,-50,-25,-50,0,0,-75,-50,0,0,0,-25,-25,0,-75,0,-50,-75];
    var DECKD_PENALTY = [0,0,0,0,0,0,0,0,0,-250,0,0,0,0,0,0,0,0,0,-250,0,0,0,0,0,0,0,0,-250,0,0,0,0,0,-250,0,0,0,0,0];
	
   

    //rewards preprogramed pentalties are higher for deck A & B.
    $(function(){
        $('#modal-splash').modal('show'); //show the modal on first load
       
        $("#emailBtn").click(function(){
            email_address = $("#emailResultsTo").val();
            $("#geemail").html(email_address);
            $('#modal-splash').modal('hide'); //close the modal
        });
	 
        $(".card").click(function (){
            if(totalclicks < MAXGAMES)
            {
                var clicked = $(this).attr("id");
                switch(clicked) 
                {
                    case "card-one":
                        if (deckoneclicks === DECKA_PENALTY.length) deckoneclicks = 0; //if we are at the end of the array reset our position back to the beginning.
                        penalty = DECKA_PENALTY[deckoneclicks]; //get the penalty value
                        netgain = DECKA_WIN + penalty;          //get the net gain
                        totalcash += netgain;                   //add into our total cash
                        deckoneclicks++;                        //increment our position
                        totalclicks++;                          //increment the game counter.
                        //output our win loss
                        $("#winamt").html(DECKA_WIN);
                        $("#penaltyamt").html(penalty.toString());
                        $("#netgains").html(netgain.toString());
                        $("#deck-one-clicks").html(deckoneclicks);
                        break;
                    case "card-two":
                        if (decktwoclicks === DECKB_PENALTY.length) decktwoclicks = 0;
                        penalty = DECKB_PENALTY[decktwoclicks];
                        netgain = DECKB_WIN + penalty;
                        totalcash += netgain;
                        decktwoclicks++;
                        totalclicks++;
                        //output our win loss
                        $("#winamt").html(DECKB_WIN);
                        $("#penaltyamt").html(penalty.toString());
                        $("#netgains").html(netgain.toString());
                        $("#deck-two-clicks").html(decktwoclicks);
                        break;
                    case "card-three":
                        if (deckthreeclicks === DECKC_PENALTY.length) deckthreeclicks = 0;
                        penalty = DECKC_PENALTY[deckthreeclicks];
                        netgain = DECKC_WIN + penalty;
                        totalcash += netgain;
                        deckthreeclicks++;
                        totalclicks++;
                        $("#winamt").html(DECKC_WIN);
                        $("#penaltyamt").html(penalty.toString());
                        $("#netgains").html(netgain.toString());                       
                        $("#deck-three-clicks").html(deckthreeclicks);
                        break;
                    case "card-four":
                        if (deckfourclicks === DECKD_PENALTY.length) deckfourclicks = 0;
                        penalty = DECKD_PENALTY[deckfourclicks];
                        netgain = DECKD_WIN + penalty;
                        totalcash += netgain;
                        deckfourclicks++;
                        totalclicks++;
                        $("#winamt").html(DECKD_WIN);
                        $("#penaltyamt").html(penalty.toString());
                        $("#netgains").html(netgain.toString());                        
                        $("#deck-four-clicks").html(deckfourclicks);
                        break;
                }
                //change the color of the font if we win or lose
                if (netgain < 0)                
                    $(".outputtext").css("color", "red");
                else
                    $(".outputtext").css("color", "blue");
               
                if(totalcash < 0) totalcash = 0; //if total cash is negative make it 0.			               

                //calculate our cash bar and display
                var cashpilebarvalue = 100 * totalcash / CASHMAX;
                $("#cashpilebar").css("width", cashpilebarvalue.toString() + "%");
                $("#cashpileamt").html("$" + totalcash);
            }
            else //game over 
            {
                $("#modal-gameend").modal('show'); //close the modal               
            }
        });
    });
</script>
 </body>
 </html>